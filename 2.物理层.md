# 第二章 物理层

**物理层**定义了比特作为信号在信道上发送时相关的电气、时序和其他接口。

## 2.1 数据通信的理论基础

### 2.1.1 傅里叶分析

19世纪早期，法国数学家傅里叶（Jean-Baptiste Fourier）证明了：热河一个行为合理周期为T的函数`g(t)`，都可以表示成用正弦函数和余弦函数组成的无穷级数：
<img src = "https://img-blog.csdnimg.cn/20191007093035358.png" width = "99%">

其中，`f=1/T`是基本频率，`an`和`bn`是n次谐波的正弦振幅和余弦振幅，`c`为常数.

对于一个有限时间的数据信号的处理可以想象成一次又一次地重复着整个模式。即在T到2T之间的信号与0到T之间的信号完全一样，以此类推。

上面的`an`、`bn`以及`c`可由如下式计算得到：

<img src = "https://img-blog.csdnimg.cn/2019100709384811.png" width = "99%">

### 2.1.2 带宽有限的信号

传输ASCII字符b时，该字符被编码成一个8比特长的字节，发送的比特模式是`01100010`，下图中(a)的左半部分显示了计算机传输该字符时的电压输出：

<div align = center>
<img src = "https://img-blog.csdnimg.cn/20191007094234403.png" width = "70%">
<div align = left>

对该信号进行傅里叶分析，可以得到以下系数：

<img src = "https://img-blog.csdnimg.cn/20191007094954971.png" width = "99%">

之所以对上述之感兴趣，是因为它们的平方与对应频率的传输能量成正比。

所有的传输设置在传输过程中都要损失一些能量，且对于不同傅里叶分量的衰减程度并不相同，从而导致接收端收到的结果信号发生变形。

一般情况下对导线而言，在0到某个频率`fc`这段范围内，振幅在传输过程中不会衰减，而在此截止频率`fc`之上的所有频率的振幅都将有不同程度的减弱。这段在传输过程中振幅不会明显减弱的频率的宽度就称为**带宽**（bandwidth）。

通常引用的**带宽**是指从0到使得接收能量保留一半的那个频率位置。

带宽是传输介质的一种物理特性，通常取决于介质的构成、厚度和电线或者光线的长度。滤波器一般可用来进一步限制信号的带宽。

例如，802.11无线信道允许使用的带宽约为20MHz，因此802.11无线装置将信号带宽过滤成这个大小。

一般将从0到某个最大的频率的信号称为**基带**（baseband）信号，将被搬移并占用某个更大频率范围的信号称为**通带**（passband）信号，通带信号与所有的无线传输情况一样。

### 2.1.3 信道的最大数据速率

尼奎斯特证明，如果一个任意信号通过了一个带宽为B的低通滤波器，那么只要进行每秒2B次采样，就可以完全重构出被过滤的信号。由于通过样值能恢复出来的高频成分已经被滤掉了，所以高于每秒2B次的采样毫无意义。如果信号包含了V个离散等级，则尼奎斯特的定理为：
 
<img src = "https://img-blog.csdnimg.cn/20191007101204505.png" width = "99%">

例如，无噪声的3KHz信道不可能以超过6000bps的速率传输二进制信号（两级）。

由于系统中分子的运动，随机（热）噪声总是存在的。热噪声的数量可以用信号功率与噪声功率的比值来度量，这样的比值称为**信噪比**（SNR, Signal-to-Noise Ratio）。

如果将**信号功率**记作S，**噪声功率**记作N，则**信噪比**为S/N。

为了使用很大的范围，该比率表示成对数形式`10lgS/N`，对数的取值单位称为**分贝**（dB, decibel）。

**香农**的重大成果是：对于一条带宽为B Hz，噪声比是S/N的有噪声信道，其最大数据速率或者容量是：

<img src = "https://img-blog.csdnimg.cn/20191007102952280.png" width = "99%">

这个结论告诉了我们实际信道能获得的最大容量。例如，在普通电话线上提供访问Internet的**ADSL**(Asymmetric Digital Subscriber Line)使用了大约1MHz的带宽。线路上信噪比的程度取决于住宅和电话交换局之间的距离，对于1-2千米的短距离来说40分贝的信噪比算是比较好的情况。正式因为电话线具有这样的特性，因此无论采用多少个信号等级，也不管采样频率多快或多慢，永远也不可能在该信道上获得高于13Mbps的数据率。

实际上，ADSL的最高速率为12Mbp。要改进这个速率，必须改进信噪比或者使用更大的带宽。

## 2.2 引导性传输介质

### 2.2.1 磁介质

将数据从一台机器传输到另一台机器的最常见的方法是将数据写到磁带或其他可擦写介质上，然后用物理的方法将磁带或者磁盘运送到目标机器，再将数据从磁带或磁盘里读出来。

### 2.2.2 双绞线

**双绞线**由两根相互绝缘的铜线组成，铜线的直径通常大约为1mm。当两根线绞在一起后，不同电线产生的干扰会相互抵消，从而能显著降低电线的辐射。

信号通常以两根电线的电压差来承载，这样对外部噪声有更好的免疫力。因为噪声对两根电线的干扰是相同的，而它们的电压差却不会改变。

双绞线既可以用于传输模拟信号，也可以用于传输数字信号。所获得的带宽取决于导线的厚度（即直径）以及传输距离的远近。许多情况下，双绞线传输几千米的距离可以达到几Mbps的带宽。

双绞线可以分成几大类。常用的一种双绞线称为5类线或“猫5”。5类双绞线由两根绝缘导线轻轻地扭在一起，4对这样的双绞线被套在一个塑料保护套内：
<div align = center>
<img src = "https://img-blog.csdnimg.cn/20191007105338594.png" width = "50%">
<div align = left>
  
 不同的局域网标准或许使用不同的双绞线。例如，100Mbps以太网使用了两对双绞线，分别用于两个方向上的传输。为了达到更高的速率，1Gbps以太网在双向传输中同时使用了全部的4对线。
 
可以双向同时使用的链路称为**全双工**；可以双向使用但一次只能使用一个方向的链路称为**半双工**；只允许一个方向上传输的链路称为**单工**。

新双绞线很有可能是6类甚至是7类线。这些类别的双绞线具有更严格的规范来处理高带宽信号。某些6类和更高类的双绞线信号速率高于500MHz，可以支撑10Gbps的链路。

到6类为止，所有的双绞线都称为**非屏蔽双绞线**（UTP, Unshielded Twisted Pair），这些双绞线仅由导线和绝缘层简单地构成。相对应地，7类双绞线在每队双绞线外面加了一个屏蔽层，然后在整个线缆外面再加一个屏蔽层。屏蔽层能够减弱外部干扰和来自附近线缆的串扰，从而满足苛刻的性能规范要求。

### 2.2.3 同轴电缆

